{"ast":null,"code":"import _toConsumableArray from\"D:/TERAstio Desktop/NoeticBlue Project/scrollable-employee-table-inlineEdit/Employees_table/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:/TERAstio Desktop/NoeticBlue Project/scrollable-employee-table-inlineEdit/Employees_table/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/TERAstio Desktop/NoeticBlue Project/scrollable-employee-table-inlineEdit/Employees_table/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/TERAstio Desktop/NoeticBlue Project/scrollable-employee-table-inlineEdit/Employees_table/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/TERAstio Desktop/NoeticBlue Project/scrollable-employee-table-inlineEdit/Employees_table/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./App.css';import React,{useState,useEffect,Fragment}from'react';import axios from'axios';import ReadOnlyRow from'./components/ReadOnlyRow/ReadOnlyRow';import EditRow from'./components/EditRow/EditRow';import _ from'lodash';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),employees=_useState2[0],setEmployees=_useState2[1];var _useState3=useState({user:{name:\"\",email:\"\",title:\"\",department:\"\"},status:\"\",role:\"\"}),_useState4=_slicedToArray(_useState3,2),editFormData=_useState4[0],setEditFormData=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),editEmployeeName=_useState6[0],setEditEmployeeName=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),uniqueRoles=_useState8[0],setUniqueRoles=_useState8[1];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var request,foundUniqueRoles;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('https://raw.githubusercontent.com/NoeticBlue/exercise-company-employees/main/employees.json');case 2:request=_context.sent;setEmployees(request.data.records);foundUniqueRoles=_.keys(_.countBy(request.data.records,function(records){return records.role;}));setUniqueRoles(foundUniqueRoles);case 6:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);var handleEditClick=function handleEditClick(event,employee){event.preventDefault();setEditEmployeeName(employee.user.name);var formValues={user:{name:employee.user.name,email:employee.user.email,title:employee.user.title,department:employee.user.department},status:employee.status,role:employee.role};setEditFormData(formValues);};var handleEditFormChange=function handleEditFormChange(event){event.preventDefault();var fieldName=event.target.getAttribute(\"name\");var fieldValue=event.target.value;if(fieldName===\"status\"){if(fieldValue.toLowerCase()===\"active\"){fieldValue=\"Inactive\";}else{fieldValue=\"Active\";}}var newFormData=_objectSpread({},editFormData);fieldName=String(fieldName);var splitKey=fieldName.split(\".\");if(splitKey.length>1){newFormData[splitKey[0]][splitKey[1]]=fieldValue;}else{newFormData[fieldName]=fieldValue;}setEditFormData(newFormData);};var handleEditFormSubmit=function handleEditFormSubmit(event){event.preventDefault();var newEmployees=_toConsumableArray(employees);var index=employees.findIndex(function(employee){return employee.user.name===editEmployeeName;});var editedEmployee={user:{name:editFormData.user.name,email:editFormData.user.email,title:editFormData.user.title,department:editFormData.user.department},status:editFormData.status,role:editFormData.role};newEmployees[index]=editedEmployee;setEmployees(newEmployees);setEditEmployeeName(null);};return/*#__PURE__*/_jsx(\"div\",{class:\"container -my-2 py-2 min-w-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"m-8 shadow border border-gray-300 rounded-lg\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleEditFormSubmit,className:\"\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table-fixed min-w-full divide-y divide-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-black flex-col text-white w-full min-w-full bg-gray-100 uppercase text-left text-gray-500 \",children:/*#__PURE__*/_jsxs(\"tr\",{className:\"flex w-full \",children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"w-1/3 font-medium pl-2\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"w-1/3 font-medium\",children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"w-1/12 font-medium text-center\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"w-2/12 font-medium text-center\",children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"w-1/12\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{class:\"flex flex-col bg-white divide-y divide-gray-300 overflow-y-auto\",style:{height:500},children:employees&&employees.map(function(employee){return/*#__PURE__*/_jsx(Fragment,{children:editEmployeeName===employee.user.name?/*#__PURE__*/_jsx(EditRow,{editFormData:editFormData,handleEditFormChange:handleEditFormChange,uniqueRoles:uniqueRoles}):/*#__PURE__*/_jsx(ReadOnlyRow,{employee:employee,handleEditClick:handleEditClick})},employee.user.name);})})]})})})});}export default App;","map":{"version":3,"sources":["D:/TERAstio Desktop/NoeticBlue Project/scrollable-employee-table-inlineEdit/Employees_table/src/App.js"],"names":["React","useState","useEffect","Fragment","axios","ReadOnlyRow","EditRow","_","App","employees","setEmployees","user","name","email","title","department","status","role","editFormData","setEditFormData","editEmployeeName","setEditEmployeeName","uniqueRoles","setUniqueRoles","fetchData","get","request","data","records","foundUniqueRoles","keys","countBy","handleEditClick","event","employee","preventDefault","formValues","handleEditFormChange","fieldName","target","getAttribute","fieldValue","value","toLowerCase","newFormData","String","splitKey","split","length","handleEditFormSubmit","newEmployees","index","findIndex","editedEmployee","height","map"],"mappings":"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","sourcesContent":["import './App.css';\r\nimport React, {useState, useEffect, Fragment } from 'react';\r\nimport axios from 'axios';\r\nimport ReadOnlyRow from './components/ReadOnlyRow/ReadOnlyRow';\r\nimport EditRow from './components/EditRow/EditRow';\r\nimport _ from 'lodash'\r\n\r\nfunction App() {\r\n\r\n  const [employees, setEmployees]= useState(null);\r\n  const [editFormData, setEditFormData] = useState({\r\n    user: {\r\n      name: \"\",\r\n      email: \"\",\r\n      title: \"\",\r\n      department: \"\"\r\n    },\r\n    status: \"\",\r\n    role: \"\"\r\n  })\r\n  const [editEmployeeName, setEditEmployeeName] = useState(null);\r\n  const [uniqueRoles, setUniqueRoles] = useState([]);\r\n  useEffect( () => {\r\n    async function fetchData (){\r\n      const request=await axios.get('https://raw.githubusercontent.com/NoeticBlue/exercise-company-employees/main/employees.json')\r\n        setEmployees(request.data.records)\r\n        let foundUniqueRoles = _.keys(_.countBy(request.data.records, function(records) { return records.role; }));\r\n        setUniqueRoles(foundUniqueRoles)\r\n      }\r\n    fetchData()\r\n  }, []);\r\n\r\n  const handleEditClick = (event, employee) => {\r\n    event.preventDefault()\r\n    setEditEmployeeName(employee.user.name)\r\n\r\n    const formValues = {\r\n      user: {\r\n        name: employee.user.name,\r\n        email: employee.user.email,\r\n        title: employee.user.title,\r\n        department: employee.user.department\r\n      },\r\n      status: employee.status,\r\n      role: employee.role\r\n    }\r\n    setEditFormData(formValues)\r\n  }\r\n\r\n  const handleEditFormChange = (event) => {\r\n    event.preventDefault()\r\n    let fieldName = event.target.getAttribute(\"name\")\r\n    let fieldValue = event.target.value\r\n    if (fieldName === \"status\"){\r\n      if (fieldValue.toLowerCase() === \"active\"){\r\n        fieldValue = \"Inactive\"\r\n      }else{\r\n        fieldValue = \"Active\"\r\n      }\r\n    }\r\n    const newFormData = {...editFormData}\r\n    \r\n    \r\n    fieldName = String(fieldName)\r\n    let splitKey = fieldName.split(\".\")\r\n    if(splitKey.length > 1){\r\n      newFormData[splitKey[0]][splitKey[1]] = fieldValue \r\n    }else{\r\n      newFormData[fieldName] = fieldValue\r\n    }\r\n    setEditFormData(newFormData)\r\n  }\r\n\r\n  const handleEditFormSubmit = (event) => {\r\n    event.preventDefault()\r\n\r\n    const newEmployees = [...employees]\r\n    const index = employees.findIndex((employee) => employee.user.name === editEmployeeName)\r\n    const editedEmployee={\r\n      user:{\r\n        name: editFormData.user.name,\r\n        email: editFormData.user.email,\r\n        title: editFormData.user.title,\r\n        department: editFormData.user.department,\r\n      },\r\n      status: editFormData.status, \r\n      role : editFormData.role\r\n    }\r\n\r\n    newEmployees[index] = editedEmployee\r\n    setEmployees(newEmployees)\r\n    setEditEmployeeName(null)\r\n  }\r\n\r\n  return (\r\n    <div class=\"container -my-2 py-2 min-w-full\">\r\n      <div className=\"m-8 shadow border border-gray-300 rounded-lg\">\r\n        <form onSubmit={handleEditFormSubmit} className=''> \r\n          <table className=\"table-fixed min-w-full divide-y divide-gray-300\">\r\n            <thead className=\"bg-black flex-col text-white w-full min-w-full bg-gray-100 uppercase text-left text-gray-500 \">\r\n              <tr className=\"flex w-full \">\r\n                <th scope='col' className='w-1/3 font-medium pl-2'>Name</th>\r\n                <th scope='col' className='w-1/3 font-medium'>Title</th>\r\n                <th scope='col' className='w-1/12 font-medium text-center'>Status</th>\r\n                <th scope='col' className='w-2/12 font-medium text-center'>Role</th>\r\n                <th scope='col' className='w-1/12'></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody class=\"flex flex-col bg-white divide-y divide-gray-300 overflow-y-auto\" style={{height: 500}}>\r\n              {employees && employees.map( (employee) => (\r\n                <Fragment key={employee.user.name}>\r\n                  {editEmployeeName === employee.user.name?(\r\n                    <EditRow editFormData={editFormData} handleEditFormChange={handleEditFormChange} uniqueRoles={uniqueRoles}/>\r\n                  ):(\r\n                    <ReadOnlyRow employee={employee} handleEditClick={handleEditClick}/>\r\n                  )} \r\n                </Fragment>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n          </form> \r\n      </div>\r\n    </div>    \r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}